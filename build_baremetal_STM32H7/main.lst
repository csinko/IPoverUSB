ARM GAS  /tmp/ccEq38Ov.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SysTick_Handler,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	SysTick_Handler
  21              		.arch armv7e-m
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  25              		.fpu fpv4-sp-d16
  27              	SysTick_Handler:
  28              	.LFB163:
  29              		.file 1 "Core/main.c"
   1:Core/main.c   **** /**
   2:Core/main.c   ****   ******************************************************************************
   3:Core/main.c   ****   * @file    main.c
   4:Core/main.c   ****   * @author  Benedek Kupper
   5:Core/main.c   ****   * @version 0.1
   6:Core/main.c   ****   * @date    2018-12-16
   7:Core/main.c   ****   * @brief   IPoverUSB application main entry point
   8:Core/main.c   ****   *
   9:Core/main.c   ****   * Copyright (c) 2018 Benedek Kupper
  10:Core/main.c   ****   *
  11:Core/main.c   ****   * Licensed under the Apache License, Version 2.0 (the "License");
  12:Core/main.c   ****   * you may not use this file except in compliance with the License.
  13:Core/main.c   ****   * You may obtain a copy of the License at
  14:Core/main.c   ****   *
  15:Core/main.c   ****   *     http://www.apache.org/licenses/LICENSE-2.0
  16:Core/main.c   ****   *
  17:Core/main.c   ****   * Unless required by applicable law or agreed to in writing, software
  18:Core/main.c   ****   * distributed under the License is distributed on an "AS IS" BASIS,
  19:Core/main.c   ****   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  20:Core/main.c   ****   * See the License for the specific language governing permissions and
  21:Core/main.c   ****   * limitations under the License.
  22:Core/main.c   ****   */
  23:Core/main.c   **** #include <bsp_io.h>
  24:Core/main.c   **** #include <bsp_usb.h>
  25:Core/main.c   **** #include <bsp_system.h>
  26:Core/main.c   **** #include <xpd_systick.h>
  27:Core/main.c   **** 
  28:Core/main.c   **** #include <usbd.h>
  29:Core/main.c   **** #include <stm32_rom_dfu.h>
ARM GAS  /tmp/ccEq38Ov.s 			page 2


  30:Core/main.c   **** #include <ncm_netif.h>
  31:Core/main.c   **** 
  32:Core/main.c   **** #include <lwip/apps/httpd.h>
  33:Core/main.c   **** #include <lwip/init.h>
  34:Core/main.c   **** #include <lwip/timeouts.h>
  35:Core/main.c   **** 
  36:Core/main.c   **** #if (NO_SYS == 0)
  37:Core/main.c   **** #include <lwip/tcpip.h>
  38:Core/main.c   **** #include <xpd_utils.h>
  39:Core/main.c   **** #include <FreeRTOS.h>
  40:Core/main.c   **** #include <task.h>
  41:Core/main.c   **** 
  42:Core/main.c   **** extern const XPD_TimeServiceType xRtosTimeService;
  43:Core/main.c   **** #endif
  44:Core/main.c   **** 
  45:Core/main.c   **** USB_HandleType _UsbDevice, *const UsbDevice = &_UsbDevice;
  46:Core/main.c   **** 
  47:Core/main.c   **** extern void usb_device_init(USBD_HandleType *usbd);
  48:Core/main.c   **** 
  49:Core/main.c   **** #if (NO_SYS == 1)
  50:Core/main.c   **** 
  51:Core/main.c   **** #if (LWIP_TIMERS == 1)
  52:Core/main.c   **** /* Minimal lwIP global time service */
  53:Core/main.c   **** static volatile uint32_t globalTime_ms = 0;
  54:Core/main.c   **** 
  55:Core/main.c   **** void SysTick_Handler(void)
  56:Core/main.c   **** {
  30              		.loc 1 56 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  57:Core/main.c   ****     globalTime_ms++;
  35              		.loc 1 57 5 view .LVU1
  36              		.loc 1 57 18 is_stmt 0 view .LVU2
  37 0000 024A     		ldr	r2, .L3
  38 0002 1368     		ldr	r3, [r2]
  39 0004 0133     		adds	r3, r3, #1
  40 0006 1360     		str	r3, [r2]
  58:Core/main.c   **** }
  41              		.loc 1 58 1 view .LVU3
  42 0008 7047     		bx	lr
  43              	.L4:
  44 000a 00BF     		.align	2
  45              	.L3:
  46 000c 00000000 		.word	.LANCHOR0
  47              		.cfi_endproc
  48              	.LFE163:
  50              		.section	.text.sys_jiffies,"ax",%progbits
  51              		.align	1
  52              		.p2align 2,,3
  53              		.global	sys_jiffies
  54              		.syntax unified
  55              		.thumb
  56              		.thumb_func
  57              		.fpu fpv4-sp-d16
  59              	sys_jiffies:
ARM GAS  /tmp/ccEq38Ov.s 			page 3


  60              	.LFB164:
  59:Core/main.c   **** uint32_t sys_jiffies(void)
  60:Core/main.c   **** {
  61              		.loc 1 60 1 is_stmt 1 view -0
  62              		.cfi_startproc
  63              		@ args = 0, pretend = 0, frame = 0
  64              		@ frame_needed = 0, uses_anonymous_args = 0
  65              		@ link register save eliminated.
  61:Core/main.c   ****     return globalTime_ms;
  66              		.loc 1 61 5 view .LVU5
  67              		.loc 1 61 12 is_stmt 0 view .LVU6
  68 0000 014B     		ldr	r3, .L6
  69 0002 1868     		ldr	r0, [r3]
  62:Core/main.c   **** }
  70              		.loc 1 62 1 view .LVU7
  71 0004 7047     		bx	lr
  72              	.L7:
  73 0006 00BF     		.align	2
  74              	.L6:
  75 0008 00000000 		.word	.LANCHOR0
  76              		.cfi_endproc
  77              	.LFE164:
  79              		.section	.text.sys_now,"ax",%progbits
  80              		.align	1
  81              		.p2align 2,,3
  82              		.global	sys_now
  83              		.syntax unified
  84              		.thumb
  85              		.thumb_func
  86              		.fpu fpv4-sp-d16
  88              	sys_now:
  89              	.LFB168:
  90              		.cfi_startproc
  91              		@ args = 0, pretend = 0, frame = 0
  92              		@ frame_needed = 0, uses_anonymous_args = 0
  93              		@ link register save eliminated.
  94 0000 014B     		ldr	r3, .L9
  95 0002 1868     		ldr	r0, [r3]
  96 0004 7047     		bx	lr
  97              	.L10:
  98 0006 00BF     		.align	2
  99              	.L9:
 100 0008 00000000 		.word	.LANCHOR0
 101              		.cfi_endproc
 102              	.LFE168:
 104              		.section	.text.startup.main,"ax",%progbits
 105              		.align	1
 106              		.p2align 2,,3
 107              		.global	main
 108              		.syntax unified
 109              		.thumb
 110              		.thumb_func
 111              		.fpu fpv4-sp-d16
 113              	main:
 114              	.LFB166:
  63:Core/main.c   **** uint32_t sys_now(void)
  64:Core/main.c   **** {
ARM GAS  /tmp/ccEq38Ov.s 			page 4


  65:Core/main.c   ****     return globalTime_ms;
  66:Core/main.c   **** }
  67:Core/main.c   **** #endif
  68:Core/main.c   **** 
  69:Core/main.c   **** int main(void)
  70:Core/main.c   **** {
 115              		.loc 1 70 1 is_stmt 1 view -0
 116              		.cfi_startproc
 117              		@ Volatile: function does not return.
 118              		@ args = 0, pretend = 0, frame = 0
 119              		@ frame_needed = 0, uses_anonymous_args = 0
  71:Core/main.c   ****     /* Prepare hardware for operation */
  72:Core/main.c   ****     BSP_USB_Bind();
 120              		.loc 1 72 5 view .LVU9
  70:Core/main.c   ****     /* Prepare hardware for operation */
 121              		.loc 1 70 1 is_stmt 0 view .LVU10
 122 0000 08B5     		push	{r3, lr}
 123              	.LCFI0:
 124              		.cfi_def_cfa_offset 8
 125              		.cfi_offset 3, -8
 126              		.cfi_offset 14, -4
 127              		.loc 1 72 5 view .LVU11
 128 0002 FFF7FEFF 		bl	BSP_USB_Bind
 129              	.LVL0:
  73:Core/main.c   ****     SystemClock_Config();
 130              		.loc 1 73 5 is_stmt 1 view .LVU12
 131 0006 FFF7FEFF 		bl	SystemClock_Config
 132              	.LVL1:
  74:Core/main.c   **** #if (LWIP_TIMERS == 1)
  75:Core/main.c   ****     SysTick_IT_Enable();
 133              		.loc 1 75 5 view .LVU13
 134              	.LBB4:
 135              	.LBI4:
 136              		.file 2 "STM32_XPD/STM32H7_XPD/inc/xpd_systick.h"
   1:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /**
   2:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   ******************************************************************************
   3:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * @file    xpd_systick.h
   4:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * @author  Benedek Kupper
   5:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * @version 0.2
   6:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * @date    2018-01-28
   7:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * @brief   STM32 eXtensible Peripheral Drivers SysTick Module
   8:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   *
   9:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * Copyright (c) 2018 Benedek Kupper
  10:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   *
  11:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * Licensed under the Apache License, Version 2.0 (the "License");
  12:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * you may not use this file except in compliance with the License.
  13:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * You may obtain a copy of the License at
  14:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   *
  15:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   *     http://www.apache.org/licenses/LICENSE-2.0
  16:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   *
  17:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * Unless required by applicable law or agreed to in writing, software
  18:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * distributed under the License is distributed on an "AS IS" BASIS,
  19:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  20:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * See the License for the specific language governing permissions and
  21:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   * limitations under the License.
  22:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****   */
  23:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** #ifndef __XPD_SYSTICK_H_
ARM GAS  /tmp/ccEq38Ov.s 			page 5


  24:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** #define __XPD_SYSTICK_H_
  25:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  26:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** #ifdef __cplusplus
  27:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** extern "C"
  28:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** {
  29:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** #endif
  30:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  31:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** #include <xpd_common.h>
  32:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  33:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /** @defgroup SysTick
  34:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @{ */
  35:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  36:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /** @defgroup SysTick_Exported_Types SysTick Exported Types
  37:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @{ */
  38:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  39:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /** @brief SysTick clock source types */
  40:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** typedef enum
  41:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** {
  42:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     SYSTICK_CLOCKSOURCE_HCLK_DIV8 = 0, /*!< SysTick clock source is HCLK divided by 8 */
  43:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     SYSTICK_CLOCKSOURCE_HCLK      = 1  /*!< SysTick clock source is HCLK */
  44:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** }SysTick_ClockSourceType;
  45:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  46:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /** @} */
  47:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  48:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /** @defgroup SysTick_Exported_Functions SysTick Exported Functions
  49:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @{ */
  50:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  51:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /**
  52:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @brief Configures the SysTick timer and interrupt generation
  53:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @param ClockSource: clock source of the timer
  54:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @param Period: the amount of timer counts until the counter reset
  55:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @return ERROR if the Period is too large to fit in the 24 bit register,
  56:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  *         OK if successful
  57:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  */
  58:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** __STATIC_INLINE XPD_ReturnType SysTick_eInit(
  59:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         SysTick_ClockSourceType eClockSource,
  60:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         uint32_t                ulPeriod)
  61:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** {
  62:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     /* check against counter size (24 bits) */
  63:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     if ((--ulPeriod) > SysTick_LOAD_RELOAD_Msk)
  64:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     {
  65:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         return XPD_ERROR;
  66:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     }
  67:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     else
  68:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     {
  69:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         /* set reload register */
  70:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         SysTick->LOAD = ulPeriod;
  71:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  72:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         /* reset the SysTick Counter Value */
  73:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         SysTick->VAL  = 0;
  74:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  75:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         /* set clock source */
  76:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         if (eClockSource != 0) {
  77:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****           SysTick->CTRL |= SysTick_CTRL_CLKSOURCE_Msk;
  78:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         } else {
  79:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****           SysTick->CTRL &= ~SysTick_CTRL_CLKSOURCE_Msk;
  80:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         }
ARM GAS  /tmp/ccEq38Ov.s 			page 6


  81:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  82:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****         return XPD_OK;
  83:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     }
  84:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** }
  85:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  86:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /**
  87:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @brief Enables the SysTick timer
  88:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  */
  89:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** __STATIC_INLINE void SysTick_vStart(void)
  90:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** {
  91:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     SysTick->CTRL |= SysTick_CTRL_ENABLE_Msk;
  92:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** }
  93:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
  94:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /**
  95:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @brief Disables the SysTick timer
  96:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  */
  97:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** __STATIC_INLINE void SysTick_vStop(void)
  98:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** {
  99:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     SysTick->CTRL &= ~SysTick_CTRL_ENABLE_Msk;
 100:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** }
 101:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
 102:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /**
 103:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @brief Starts the SysTick timer with interrupt generation
 104:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  */
 105:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** __STATIC_INLINE void SysTick_vStart_IT(void)
 106:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** {
 107:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     SysTick->VAL = 0;
 108:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     SysTick->CTRL |= SysTick_CTRL_TICKINT_Msk | SysTick_CTRL_ENABLE_Msk;
 109:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** }
 110:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
 111:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /**
 112:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @brief Stops the SysTick timer with interrupt generation
 113:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  */
 114:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** __STATIC_INLINE void SysTick_vStop_IT(void)
 115:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** {
 116:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     SysTick->CTRL &= ~(SysTick_CTRL_TICKINT_Msk | SysTick_CTRL_ENABLE_Msk);
 117:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** }
 118:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** 
 119:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** /**
 120:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  * @brief Enables the SysTick interrupt request
 121:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****  */
 122:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** __STATIC_INLINE void SysTick_IT_Enable(void)
 137              		.loc 2 122 22 view .LVU14
 138              	.LBB5:
 123:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h **** {
 124:STM32_XPD/STM32H7_XPD/inc/xpd_systick.h ****     SysTick->CTRL |= SysTick_CTRL_TICKINT_Msk;
 139              		.loc 2 124 5 view .LVU15
 140              		.loc 2 124 19 is_stmt 0 view .LVU16
 141 000a 0D4A     		ldr	r2, .L14
 142 000c 1368     		ldr	r3, [r2]
 143 000e 43F00203 		orr	r3, r3, #2
 144 0012 1360     		str	r3, [r2]
 145              	.LBE5:
 146              	.LBE4:
  76:Core/main.c   **** #endif
  77:Core/main.c   **** 
  78:Core/main.c   ****     /* Initialize applications */
ARM GAS  /tmp/ccEq38Ov.s 			page 7


  79:Core/main.c   ****     /* DFU interface can be issued a Detach request,
  80:Core/main.c   ****      * which puts the STM32 to ROM bootloader mode */
  81:Core/main.c   ****     STM32_ROM_DFU_Init();
 147              		.loc 1 81 5 is_stmt 1 view .LVU17
 148 0014 FFF7FEFF 		bl	STM32_ROM_DFU_Init
 149              	.LVL2:
  82:Core/main.c   **** 
  83:Core/main.c   ****     /* init lwIP stack and network interface */
  84:Core/main.c   ****     lwip_init();
 150              		.loc 1 84 5 view .LVU18
 151 0018 FFF7FEFF 		bl	lwip_init
 152              	.LVL3:
  85:Core/main.c   ****     ncm_netif_init();
 153              		.loc 1 85 5 view .LVU19
 154 001c FFF7FEFF 		bl	ncm_netif_init
 155              	.LVL4:
  86:Core/main.c   ****     usb_device_init(UsbDevice);
 156              		.loc 1 86 5 view .LVU20
 157 0020 0848     		ldr	r0, .L14+4
 158 0022 FFF7FEFF 		bl	usb_device_init
 159              	.LVL5:
  87:Core/main.c   **** 
  88:Core/main.c   ****     /* use default HTTP server for demonstration */
  89:Core/main.c   ****     httpd_init();
 160              		.loc 1 89 5 view .LVU21
 161 0026 FFF7FEFF 		bl	httpd_init
 162              	.LVL6:
  90:Core/main.c   **** 
  91:Core/main.c   ****     /* Attach the USB device to the host (soft-connect) */
  92:Core/main.c   ****     USBD_Connect(UsbDevice);
 163              		.loc 1 92 5 view .LVU22
 164 002a 0648     		ldr	r0, .L14+4
 165 002c FFF7FEFF 		bl	USBD_Connect
 166              	.LVL7:
 167              	.L12:
  93:Core/main.c   **** 
  94:Core/main.c   ****     while (1)
 168              		.loc 1 94 5 discriminator 1 view .LVU23
  95:Core/main.c   ****     {
  96:Core/main.c   ****         /* perform networking */
  97:Core/main.c   ****         ncm_netif_process();
 169              		.loc 1 97 9 discriminator 1 view .LVU24
 170 0030 FFF7FEFF 		bl	ncm_netif_process
 171              	.LVL8:
  98:Core/main.c   **** 
  99:Core/main.c   ****         sys_check_timeouts();
 172              		.loc 1 99 9 discriminator 1 view .LVU25
 173 0034 FFF7FEFF 		bl	sys_check_timeouts
 174              	.LVL9:
 100:Core/main.c   **** 
 101:Core/main.c   ****         /* switch to bootloader when Detached */
 102:Core/main.c   ****         STM32_ROM_DFU_Main();
 175              		.loc 1 102 9 discriminator 1 view .LVU26
 176 0038 FFF7FEFF 		bl	STM32_ROM_DFU_Main
 177              	.LVL10:
  94:Core/main.c   ****     {
 178              		.loc 1 94 11 discriminator 1 view .LVU27
ARM GAS  /tmp/ccEq38Ov.s 			page 8


 179 003c F8E7     		b	.L12
 180              	.L15:
 181 003e 00BF     		.align	2
 182              	.L14:
 183 0040 10E000E0 		.word	-536813552
 184 0044 00000000 		.word	_UsbDevice
 185              		.cfi_endproc
 186              	.LFE166:
 188              		.global	UsbDevice
 189              		.comm	_UsbDevice,780,4
 190              		.section	.bss.globalTime_ms,"aw",%nobits
 191              		.align	2
 192              		.set	.LANCHOR0,. + 0
 195              	globalTime_ms:
 196 0000 00000000 		.space	4
 197              		.section	.rodata.UsbDevice,"a"
 198              		.align	2
 201              	UsbDevice:
 202 0000 00000000 		.word	_UsbDevice
 203              		.text
 204              	.Letext0:
 205              		.file 3 "/usr/arm-none-eabi/include/machine/_default_types.h"
 206              		.file 4 "/usr/arm-none-eabi/include/sys/_stdint.h"
 207              		.file 5 "STM32_XPD/STM32H7_XPD/inc/xpd_common.h"
 208              		.file 6 "STM32_XPD/CMSIS/Include/core_cm7.h"
 209              		.file 7 "STM32_XPD/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
 210              		.file 8 "STM32_XPD/CMSIS/Device/ST/STM32H7xx/Include/stm32h743xx.h"
 211              		.file 9 "STM32_XPD/STM32H7_XPD/inc/xpd_exti.h"
 212              		.file 10 "STM32_XPD/STM32H7_XPD/inc/xpd_gpio.h"
 213              		.file 11 "BSP_STM32H7xx/bsp_io.h"
 214              		.file 12 "USBDevice/Include/usb_types.h"
 215              		.file 13 "USBDevice/PDs/STM32_XPD/usbd_pd_def.h"
 216              		.file 14 "USBDevice/Include/usbd_types.h"
 217              		.file 15 "USBDevice/PDs/STM32_XPD/xpd_usb_wrapper.h"
 218              		.file 16 "USBDevice/Include/usbd_dfu.h"
 219              		.file 17 "Core/stm32_rom_dfu.h"
 220              		.file 18 "/usr/arm-none-eabi/include/sys/lock.h"
 221              		.file 19 "/usr/arm-none-eabi/include/sys/_types.h"
 222              		.file 20 "/usr/lib/gcc/arm-none-eabi/9.2.0/include/stddef.h"
 223              		.file 21 "/usr/arm-none-eabi/include/sys/reent.h"
 224              		.file 22 "/usr/arm-none-eabi/include/stdlib.h"
 225              		.file 23 "lwIP/src/include/lwip/arch.h"
 226              		.file 24 "/usr/arm-none-eabi/include/ctype.h"
 227              		.file 25 "lwIP/src/include/lwip/err.h"
 228              		.file 26 "lwIP/src/include/lwip/ip4_addr.h"
 229              		.file 27 "lwIP/src/include/lwip/ip_addr.h"
 230              		.file 28 "lwIP/src/include/lwip/pbuf.h"
 231              		.file 29 "lwIP/src/include/lwip/memp.h"
 232              		.file 30 "lwIP/src/include/lwip/priv/memp_priv.h"
 233              		.file 31 "lwIP/src/include/lwip/netif.h"
 234              		.file 32 "USBDevice/Include/usbd_cdc.h"
 235              		.file 33 "USBDevice/Include/usbd_ncm.h"
 236              		.file 34 "Core/ncm_netif.h"
 237              		.file 35 "lwIP/src/include/lwip/timeouts.h"
 238              		.file 36 "BSP_STM32H7xx/bsp_usb.h"
 239              		.file 37 "BSP_STM32H7xx/bsp_system.h"
 240              		.file 38 "lwIP/src/include/lwip/init.h"
ARM GAS  /tmp/ccEq38Ov.s 			page 9


 241              		.file 39 "lwIP/src/include/lwip/apps/httpd.h"
 242              		.file 40 "USBDevice/Include/usbd.h"
ARM GAS  /tmp/ccEq38Ov.s 			page 10


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
     /tmp/ccEq38Ov.s:18     .text.SysTick_Handler:0000000000000000 $t
     /tmp/ccEq38Ov.s:27     .text.SysTick_Handler:0000000000000000 SysTick_Handler
     /tmp/ccEq38Ov.s:46     .text.SysTick_Handler:000000000000000c $d
     /tmp/ccEq38Ov.s:51     .text.sys_jiffies:0000000000000000 $t
     /tmp/ccEq38Ov.s:59     .text.sys_jiffies:0000000000000000 sys_jiffies
     /tmp/ccEq38Ov.s:75     .text.sys_jiffies:0000000000000008 $d
     /tmp/ccEq38Ov.s:80     .text.sys_now:0000000000000000 $t
     /tmp/ccEq38Ov.s:88     .text.sys_now:0000000000000000 sys_now
     /tmp/ccEq38Ov.s:100    .text.sys_now:0000000000000008 $d
     /tmp/ccEq38Ov.s:105    .text.startup.main:0000000000000000 $t
     /tmp/ccEq38Ov.s:113    .text.startup.main:0000000000000000 main
     /tmp/ccEq38Ov.s:183    .text.startup.main:0000000000000040 $d
                            *COM*:000000000000030c _UsbDevice
     /tmp/ccEq38Ov.s:201    .rodata.UsbDevice:0000000000000000 UsbDevice
     /tmp/ccEq38Ov.s:191    .bss.globalTime_ms:0000000000000000 $d
     /tmp/ccEq38Ov.s:195    .bss.globalTime_ms:0000000000000000 globalTime_ms
     /tmp/ccEq38Ov.s:198    .rodata.UsbDevice:0000000000000000 $d

UNDEFINED SYMBOLS
BSP_USB_Bind
SystemClock_Config
STM32_ROM_DFU_Init
lwip_init
ncm_netif_init
usb_device_init
httpd_init
USBD_Connect
ncm_netif_process
sys_check_timeouts
STM32_ROM_DFU_Main
